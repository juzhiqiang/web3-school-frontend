# Web3 学校 - 创建课程功能文档

## 功能概述

本项目实现了一个完整的Web3去中心化教育平台的创建课程功能，包括智能合约集成、一灯币奖励系统、以及课程管理等核心功能。

## 🎯 核心功能

### 1. 创建课程 (`CreateCourse.tsx`)
- ✅ **完整表单系统**: 课程标题、描述、价格、时长、课程内容等
- ✅ **智能合约集成**: 使用合约地址 `0xea6e47911B5f76B81B2a18E8C674380372295f9C`
- ✅ **一灯币奖励**: 创建成功后自动奖励10一灯币
- ✅ **数据上链**: 将课程信息存储到区块链
- ✅ **实时验证**: 表单验证和错误处理
- ✅ **响应式UI**: 支持移动端和桌面端

### 2. 我的课程管理 (`MyCourses.tsx`)
- ✅ **课程列表展示**: 显示用户发布的所有课程
- ✅ **收益统计**: 实时显示课程收益和学员数据
- ✅ **课程操作**: 查看、编辑、统计分析等操作
- ✅ **数据可视化**: 收益图表和学员统计

### 3. 智能合约集成 (`contract.ts`)
- ✅ **完整ABI定义**: 包含所有必要的合约函数
- ✅ **事件监听**: 课程创建、购买等事件
- ✅ **错误处理**: 完善的错误处理机制
- ✅ **Gas优化**: 优化的合约调用

### 4. 自定义Hook (`useCourseContract.ts`)
- ✅ **课程管理**: 创建、获取、更新课程
- ✅ **购买系统**: 课程购买和权限验证
- ✅ **统计数据**: 收益和学员统计
- ✅ **状态管理**: 完整的加载和错误状态

## 🛠 技术栈

- **前端框架**: React 19 + TypeScript
- **Web3集成**: Wagmi + Viem + RainbowKit
- **状态管理**: React Hooks + Context
- **UI组件**: Tailwind CSS + Lucide Icons
- **通知系统**: React Hot Toast
- **路由管理**: React Router DOM

## 📁 项目结构

```
src/
├── pages/
│   ├── CreateCourse/
│   │   └── CreateCourse.tsx        # 创建课程页面
│   └── MyCourses/
│       └── MyCourses.tsx          # 我的课程页面
├── hooks/
│   └── useCourseContract.ts       # 课程合约Hook
├── config/
│   └── contract.ts               # 智能合约配置
└── types/
    └── course.ts                 # 课程类型定义
```

## 🔧 安装与运行

1. **安装依赖**:
```bash
npm install
```

2. **启动开发服务器**:
```bash
npm run dev
```

3. **构建生产版本**:
```bash
npm run build
```

## 🚀 核心功能流程

### 创建课程流程
1. **连接钱包** → 用户连接Web3钱包
2. **填写表单** → 输入课程信息、价格、内容
3. **表单验证** → 验证必填字段和格式
4. **调用合约** → 提交数据到区块链
5. **等待确认** → 等待交易确认
6. **获得奖励** → 自动获得10一灯币
7. **保存本地** → 缓存课程数据便于管理

### 课程管理流程
1. **加载课程** → 从区块链和本地存储获取课程
2. **统计展示** → 显示收益、学员等数据
3. **操作管理** → 查看、编辑、分析课程
4. **收益提取** → 提取课程销售收益

## 💰 经济模型

### 一灯币奖励机制
- **创建课程**: 10 一灯币
- **完成课程**: 5 一灯币  
- **首次购买**: 2 一灯币
- **课程评价**: 1 一灯币

### 收益分配
- **创作者收益**: 90% (课程销售收入)
- **平台手续费**: 10% (维护运营成本)

## 🔒 安全特性

- **钱包验证**: 必须连接钱包才能操作
- **输入验证**: 严格的前端表单验证
- **合约验证**: 智能合约层面的安全检查
- **错误处理**: 完善的错误捕获和用户提示

## 🎨 用户体验

- **响应式设计**: 适配各种设备尺寸
- **加载状态**: 清晰的加载和处理状态
- **错误提示**: 友好的错误信息和解决建议
- **成功反馈**: 操作成功后的确认和奖励提示
- **流畅动画**: 平滑的过渡和交互动画

## 📱 界面截图

### 创建课程页面
- 完整的课程创建表单
- 实时表单验证
- 课程内容管理
- 标签和分类系统

### 我的课程页面  
- 课程卡片展示
- 收益统计概览
- 快速操作按钮
- 数据可视化图表

## 🔗 智能合约

**合约地址**: `0xea6e47911B5f76B81B2a18E8C674380372295f9C`

**主要函数**:
- `createCourse()`: 创建新课程
- `purchaseCourse()`: 购买课程
- `rewardYiDengCoin()`: 奖励一灯币
- `getCreatorCourses()`: 获取创作者课程
- `withdrawEarnings()`: 提取收益

## 🚦 使用说明

1. **连接钱包**: 首次使用需要连接Web3钱包
2. **创建课程**: 填写课程信息并提交到区块链
3. **管理课程**: 在"我的课程"页面查看和管理
4. **获得奖励**: 创建成功后自动获得一灯币
5. **提取收益**: 可以随时提取课程销售收益

## 🛡 注意事项

- 确保钱包有足够的Gas费用进行交易
- 课程创建后无法删除，请仔细检查信息
- 价格设置后建议谨慎修改，影响用户体验
- 定期备份课程数据，避免数据丢失

## 🔄 后续开发计划

- [ ] 课程编辑功能
- [ ] 课程统计分析页面  
- [ ] 学员评价系统
- [ ] 课程分类和搜索
- [ ] NFT证书发放
- [ ] 社交分享功能

---

**开发状态**: ✅ 核心功能完成  
**测试状态**: 🔄 本地测试通过  
**部署状态**: ⏳ 待部署到测试网

## 📞 技术支持

如有问题或建议，请创建Issue或联系开发团队。